<html>
    <head>
        <title>登录(Login)</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
		<meta http-equiv="content-type" content="text/html; charset=gbk">
        <!-- CSS -->
        <link rel="stylesheet" href="css/loginstyle.css">
        <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
<style type="text/css">
	.identifycode{
		float:left;
		margin-top:28px;
		margin-left:8px;
		height:32px;
		color: black;
	}
	.change{
		font-size:12px;
		font-style:italic;
		color:#BC8F8F;
		cursor: pointer;
	}
	.username,.password,.Captcha{
		color: gray;
	}

</style>

<script type="text/javascript">

	function changeCode(){
	
	var str=document.getElementById("img");
	
	str.src="identifycode?"+Math.random();
	}
	
	
	$(document).ready(function()
	{
		$(".submit_button").click(function()
		{
			var username = $(".username").val();
			var password = $(".password").val();
			var identifyCode = $(".Captcha").val();
			
			if(username.length <= 0 || username == " ")
			{
				$(".error").html("用户名不为空！");
			}
			else if(password.length <= 0 || password == " ")
			{
				$(".error").html("用户密码不为空！");
			}
			else if(identifyCode.length <= 0 || identifyCode == " ")
			{
				$(".error").html("验证码不为空！");
			}
			$.ajax(
			{
				url:'login',
				type:'post',
				dataType: 'json',
				data:{'username':username, 'password':password, 'identifyCode':identifyCode},
				success:function(data){
					var jsonResult = eval("(" + data + ")");
					switch(jsonResult.name)
					{
						case "username":$(".error").html("用户名填写错误！");break;
						case "password":$(".error").html("密码填写错误！");break;
						case "identifyCode":$(".error").html("验证码填写错误！");break;
						case "success":location.href="fanyi";
					}
				},
				error:function(){
					$(".error").html("数据提交发生错误！");
				}
			});
			
			return false;
		});
	});
	</script>
    </head>

    <body>

        <div class="page-container">
            <h1>登录(Login)</h1>

             <div class="error"></div>
            <form action="login" method="post">
                <input type="text" name="username" class="username" placeholder="请输入您的用户名！">
                <input type="password" name="password" class="password" placeholder="请输入您的用户密码！">
                <input type="text" name="identifyCode" class="Captcha" placeholder="请输入验证码！">
                <div class="identifycode">
                <img id="img" src="identifycode"/>
            	   <span class='change'  onclick="changeCode(); ">换一张</span> 
                </div>
                <button type="submit" class="submit_button">登录</button>
                
            </form>
            
        </div>

    </body>

</html>
